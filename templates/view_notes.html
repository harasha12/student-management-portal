<!DOCTYPE html>
<html>
<head>
    <title>View Notes</title>
</head>
<body>
    <h2>Available Notes (Student)</h2>

    <!-- Filter Form -->
    <form method="GET" action="{{ url_for('view_notes') }}">
        <label>Department:</label>
        <input type="text" name="department" value="{{ request.args.get('department','') }}">

        <label>Year:</label>
        <input type="number" name="year" value="{{ request.args.get('year','') }}">

        <button type="submit">Filter</button>
        <a href="{{ url_for('view_notes') }}">Reset</a>
    </form>

    <br>

    <!-- Notes Table -->
    <table border="1" cellpadding="8">
        <tr>
            <th>Subject</th>
            <th>Department</th>
            <th>Year</th>
            <th>Title</th>
            <th>Teacher</th>
            <th>Date</th>
            <th>Download</th>
        </tr>
        {% for note in notes %}
        <tr>
            <td>{{ note['subject'] }}</td>
            <td>{{ note['department'] }}</td>
            <td>{{ note['year'] }}</td>
            <td>{{ note['title'] }}</td>
            <td>{{ note['uploaded_by'] }}</td>
            <td>{{ note['uploaded_on'] }}</td>
            <td><a href="{{ url_for('download_note', filename=note['filename']) }}">Download</a></td>
        </tr>
        {% endfor %}
    </table>

    {% if not notes %}
        <p>No notes found for the selected filters.</p>
    {% endif %}
</body>
</html>
